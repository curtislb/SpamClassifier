From beginners-return-90805-ktwarwic=speedy.uwaterloo.ca@perl.org  Tue Apr 10 12:56:01 2007
Return-Path: <beginners-return-90805-ktwarwic=speedy.uwaterloo.ca@perl.org>
Received: from lists.develooper.com (x6.develooper.com [63.251.223.186])
	by speedy.uwaterloo.ca (8.12.8/8.12.5) with SMTP id l3AGtw0I031994
	for <ktwarwic@speedy.uwaterloo.ca>; Tue, 10 Apr 2007 12:56:00 -0400
Received: (qmail 3944 invoked by uid 514); 10 Apr 2007 16:55:28 -0000
Mailing-List: contact beginners-help@perl.org; run by ezmlm
Precedence: bulk
List-Post: <mailto:beginners@perl.org>
List-Help: <mailto:beginners-help@perl.org>
List-Unsubscribe: <mailto:beginners-unsubscribe@perl.org>
List-Subscribe: <mailto:beginners-subscribe@perl.org>
List-Id: <beginners.perl.org>
Delivered-To: mailing list beginners@perl.org
Received: (qmail 3935 invoked from network); 10 Apr 2007 16:55:28 -0000
Received: from x1a.develooper.com (HELO x1.develooper.com) (216.52.237.111)
  by lists.develooper.com with SMTP; 10 Apr 2007 16:55:28 -0000
Received: (qmail 25445 invoked by uid 225); 10 Apr 2007 16:55:27 -0000
Delivered-To: beginners@perl.org
Received: (qmail 25439 invoked by alias); 10 Apr 2007 16:55:27 -0000
X-Spam-Status: No, hits=-2.6 required=8.0
	tests=BAYES_00,DKIM_SIGNED,DKIM_VERIFIED,DK_POLICY_SIGNSOME,DK_SIGNED,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: la.mx.develooper.com
Received-SPF: pass (x1.develooper.com: domain of igor.sutton@gmail.com designates 66.249.92.174 as permitted sender)
Received: from ug-out-1314.google.com (HELO ug-out-1314.google.com) (66.249.92.174)
    by la.mx.develooper.com (qpsmtpd/0.28) with ESMTP; Tue, 10 Apr 2007 09:55:21 -0700
Received: by ug-out-1314.google.com with SMTP id s2so103299uge
        for <beginners@perl.org>; Tue, 10 Apr 2007 09:55:15 -0700 (PDT)
DKIM-Signature: a=rsa-sha1; c=relaxed/relaxed;
        d=gmail.com; s=beta;
        h=domainkey-signature:received:received:in-reply-to:references:mime-version:content-type:message-id:cc:from:subject:date:to:content-transfer-encoding:x-pgp-agent:x-mailer;
        b=V7OPPSYM9eqZ/DDDKWjduQ2aFVTxsGhek8bb3EsEPj1PKix01UwSLBayXyexRkmlMaGw3DromLeJ/tNp0GN2HOJ+zibl3fvEGQj8Vg7u7mZNf/QAaLE4+D+W/ZHmEuMeVQ4Sd5qoY5kLXTaI1DzQuuqXMpjZ8rdRjXkYZV8f3M0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=beta;
        h=received:in-reply-to:references:mime-version:content-type:message-id:cc:from:subject:date:to:content-transfer-encoding:x-pgp-agent:x-mailer;
        b=Vn7mo5bMcKXPy9UXx7HhnaCdLq4QR5/R3pjf9aToSY+qlt1FIJkTgZRxjw0iQ9h09lSLNIqd1uhXwWJmR+uz1edAr24/mqpojNFOVzqafai+syNZkLckRx3yEmO8+DkmNiRsX4Dgm4bCB9kwthmKezVI1wqsIa8FURFyVCrqHi0=
Received: by 10.67.89.5 with SMTP id r5mr421835ugl.1176224114765;
        Tue, 10 Apr 2007 09:55:14 -0700 (PDT)
Received: from ?172.28.229.52? ( [194.65.5.235])
        by mx.google.com with ESMTP id 59sm950331ugf.2007.04.10.09.55.12;
        Tue, 10 Apr 2007 09:55:13 -0700 (PDT)
In-Reply-To: <461BAFFA.8020804@telus.net>
References: <F5C9F59EBDB1ED42AF2FEB000D26BAAB1B9892@exch2003.mrdb.local> <461B9ECF.6020005@telus.net> <DDC9E089-28A6-4506-8E05-D0276EFC91E8@gmail.com> <461BAFFA.8020804@telus.net>
Mime-Version: 1.0 (Apple Message framework v752.3)
Content-Type: multipart/signed; protocol="application/pgp-signature"; micalg=pgp-sha1; boundary="Apple-Mail-18-348405364"
Message-Id: <3737D126-8817-4BED-B682-7BE28E1FF54D@gmail.com>
Cc: Igor Sutton Lopes <igor.sutton@gmail.com>,
   Perl Beginners <beginners@perl.org>
From: Igor Sutton Lopes <igor.sutton@gmail.com>
Subject: Re: Sorting dir output
Date: Tue, 10 Apr 2007 17:55:00 +0100
To: "John W. Krahn" <krahnj@telus.net>
Content-Transfer-Encoding: 7bit
X-Pgp-Agent: GPGMail 1.1.2 (Tiger)
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked
Status: O
Content-Length: 5163
Lines: 141

--Apple-Mail-18-348405364
Content-Type: multipart/alternative; boundary=Apple-Mail-17-348405264


--Apple-Mail-17-348405264
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed

Sorry! I was testing and sent the last version -TextMate integrated  
with Mail.app- :-(

On Apr 10, 2007, at 4:40 PM, John W. Krahn wrote:

> [...]
> Did you test this?  Where do you distinguish between files "older  
> than 3 days"
> and other files?  Where is "name('trunk')" specified by the OP?

The correct answer:

<code>
use strict;
use warnings;

use File::Copy;
use File::Find::Rule;
use File::Spec;

my $basedir = "/Users/igorsutton/workspace";

sub move_file {

     # using -M is better than doing the calculation to obtain the  
difference
     # from now and three days ago.
     return unless -M $_ < 3;

     move( $_[2], File::Spec->catdir( $basedir, 'history', $_ ) )
       or warn $!;

     # cheat with File::Find::Rule returning an undefined value, to  
not waste
     # memory with unused data.
     return;
}

# we use the name '*' to remove the current directory.
File::Find::Rule->directory()->maxdepth(1)->name('*')->exec 
( \&move_file )
   ->in($basedir);
</code>

Sorry for the erroneous code before.

--
Igor Sutton
igor.sutton@gmail.com




--Apple-Mail-17-348405264
Content-Transfer-Encoding: quoted-printable
Content-Type: text/html;
	charset=ISO-8859-1

<HTML><BODY style=3D"word-wrap: break-word; -khtml-nbsp-mode: space; =
-khtml-line-break: after-white-space; ">Sorry! I was testing and sent =
the last version -TextMate integrated with Mail.app- :-(<DIV><BR =
class=3D"khtml-block-placeholder"><DIV><DIV><DIV>On Apr 10, 2007, at =
4:40 PM, John W. Krahn wrote:</DIV><BR =
class=3D"Apple-interchange-newline"><BLOCKQUOTE type=3D"cite"><DIV =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; min-height: 14px; ">[...]<BR></DIV><DIV =
style=3D"margin-top: 0px; margin-right: 0px; margin-bottom: 0px; =
margin-left: 0px; ">Did you test this?<SPAN =
class=3D"Apple-converted-space">=A0 </SPAN>Where do you distinguish =
between files "older than 3 days"</DIV><DIV style=3D"margin-top: 0px; =
margin-right: 0px; margin-bottom: 0px; margin-left: 0px; ">and other =
files?<SPAN class=3D"Apple-converted-space">=A0 </SPAN>Where is =
"name('trunk')" specified by the =
OP?</DIV></BLOCKQUOTE><BR></DIV><DIV>The correct answer:</DIV><DIV><BR =
class=3D"khtml-block-placeholder"></DIV><DIV>&lt;code&gt;</DIV><DIV>use =
strict;</DIV><DIV>use warnings;</DIV><DIV><BR =
class=3D"khtml-block-placeholder"></DIV><DIV>use =
File::Copy;</DIV><DIV>use File::Find::Rule;</DIV><DIV>use =
File::Spec;</DIV><DIV><BR class=3D"khtml-block-placeholder"></DIV><DIV>my =
$basedir =3D "/Users/igorsutton/workspace";</DIV><DIV><BR =
class=3D"khtml-block-placeholder"></DIV><DIV>sub move_file =
{</DIV><DIV><BR class=3D"khtml-block-placeholder"></DIV><DIV>=A0 =A0 # =
using -M is better than doing the calculation to obtain the =
difference</DIV><DIV>=A0 =A0 # from now and three days ago.</DIV><DIV>=A0 =
=A0 return unless -M $_ &lt; 3;</DIV><DIV><BR =
class=3D"khtml-block-placeholder"></DIV><DIV>=A0 =A0 move( $_[2], =
File::Spec-&gt;catdir( $basedir, 'history', $_ ) )</DIV><DIV>=A0 =A0 =A0 =
or warn $!;</DIV><DIV><BR class=3D"khtml-block-placeholder"></DIV><DIV>=A0=
 =A0 # cheat with File::Find::Rule returning an undefined value, to not =
waste</DIV><DIV>=A0 =A0 # memory with unused data.</DIV><DIV>=A0 =A0 =
return;</DIV><DIV>}</DIV><DIV><BR =
class=3D"khtml-block-placeholder"></DIV><DIV># we use the name '*' to =
remove the current =
directory.</DIV><DIV>File::Find::Rule-&gt;directory()-&gt;maxdepth(1)-&gt;=
name('*')-&gt;exec( \&amp;move_file )</DIV><DIV>=A0 =
-&gt;in($basedir);</DIV><DIV>&lt;/code&gt;</DIV><DIV><BR =
class=3D"khtml-block-placeholder"></DIV><DIV>Sorry for the erroneous =
code before.</DIV><DIV><BR =
class=3D"khtml-block-placeholder"></DIV>--<DIV><SPAN =
class=3D"Apple-style-span" style=3D"border-collapse: separate; =
border-spacing: 0px 0px; color: rgb(0, 0, 0); font-family: Lucida =
Grande; font-size: 12px; font-style: normal; font-variant: normal; =
font-weight: normal; letter-spacing: normal; line-height: normal; =
text-align: auto; -khtml-text-decorations-in-effect: none; text-indent: =
0px; -apple-text-size-adjust: auto; text-transform: none; orphans: 2; =
white-space: normal; widows: 2; word-spacing: 0px; "><DIV>Igor =
Sutton</DIV><DIV><A =
href=3D"mailto:igor.sutton@gmail.com">igor.sutton@gmail.com</A></DIV><DIV>=
<BR class=3D"khtml-block-placeholder"></DIV><BR =
class=3D"Apple-interchange-newline"></SPAN> =
</DIV><BR></DIV></DIV></BODY></HTML>=

--Apple-Mail-17-348405264--

--Apple-Mail-18-348405364
content-type: application/pgp-signature; x-mac-type=70674453;
	name=PGP.sig
content-description: This is a digitally signed message part
content-disposition: inline; filename=PGP.sig
content-transfer-encoding: 7bit

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.5 (Darwin)

iD8DBQFGG8FnKuhQxiIVvZwRAkP/AKCmGjgm6e+6oRlFt0m/iw15JRr38gCg+h8i
MaLUIJDmMjoRpI2JIqfEO1o=
=w14Z
-----END PGP SIGNATURE-----

--Apple-Mail-18-348405364--

