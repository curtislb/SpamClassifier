From samba-technical-bounces+ktwarwic=speedy.uwaterloo.ca@lists.samba.org  Sun Apr 29 11:14:17 2007
Return-Path: <samba-technical-bounces+ktwarwic=speedy.uwaterloo.ca@lists.samba.org>
Received: from lists.samba.org (mail.samba.org [66.70.73.150])
	by speedy.uwaterloo.ca (8.12.8/8.12.5) with ESMTP id l3TFEH6w002165
	for <ktwarwic@speedy.uwaterloo.ca>; Sun, 29 Apr 2007 11:14:17 -0400
Received: from dp.samba.org (localhost [127.0.0.1])
	by lists.samba.org (Postfix) with ESMTP id F109E1638F8
	for <ktwarwic@speedy.uwaterloo.ca>; Sun, 29 Apr 2007 15:14:15 +0000 (GMT)
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on dp.samba.org
X-Spam-Level: 
X-Spam-Status: No, score=-1.5 required=3.8 tests=ALL_TRUSTED,AWL,BAYES_00,
	RCVD_IN_DSBL autolearn=ham version=3.1.7
X-Original-To: samba-technical@samba.org
Delivered-To: samba-technical@samba.org
Received: from [127.0.0.1] (dp [66.70.73.150])
	by lists.samba.org (Postfix) with ESMTP id 86836162AE1;
	Sun, 29 Apr 2007 15:13:32 +0000 (GMT)
From: Andrew Bartlett <abartlet@samba.org>
To: "Stefan (metze) Metzmacher" <metze@samba.org>
In-Reply-To: <46348E82.1070309@samba.org>
References: <1177839642.6033.24.camel@localhost.localdomain>
	<46348E82.1070309@samba.org>
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature";
	boundary="=-6M/HpvnaEsj8fqFj4rMo"
Date: Sun, 29 Apr 2007 17:13:24 +0200
Message-Id: <1177859604.6033.37.camel@localhost.localdomain>
Mime-Version: 1.0
X-Mailer: Evolution 2.10.1 (2.10.1-4.fc7) 
Cc: samba-technical@samba.org
Subject: Re: Restrictions on invocationID?
X-BeenThere: samba-technical@lists.samba.org
X-Mailman-Version: 2.1.5
Precedence: list
List-Id: "Discussions on Samba internals. For general questions please
	subscribe to the list samba@samba.org"
	<samba-technical.lists.samba.org>
List-Unsubscribe: <https://lists.samba.org/mailman/listinfo/samba-technical>, 
	<mailto:samba-technical-request@lists.samba.org?subject=unsubscribe>
List-Archive: <http://lists.samba.org/archive/samba-technical>
List-Post: <mailto:samba-technical@lists.samba.org>
List-Help: <mailto:samba-technical-request@lists.samba.org?subject=help>
List-Subscribe: <https://lists.samba.org/mailman/listinfo/samba-technical>,
	<mailto:samba-technical-request@lists.samba.org?subject=subscribe>
Sender: samba-technical-bounces+ktwarwic=speedy.uwaterloo.ca@lists.samba.org
Errors-To: samba-technical-bounces+ktwarwic=speedy.uwaterloo.ca@lists.samba.org
Status: O
Content-Length: 2543
Lines: 71


--=-6M/HpvnaEsj8fqFj4rMo
Content-Type: text/plain
Content-Transfer-Encoding: quoted-printable

On Sun, 2007-04-29 at 14:24 +0200, Stefan (metze) Metzmacher wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
>=20
> Andrew Bartlett schrieb:
> > Metze:
> >=20
> > I'm trying to implement the cn=3Dconfiguration container against LDAP.
> > Currently, it doesn't work because we fix the invocationID *and*
> > objectGUID of the cn=3DNTDS Settings,cn=3D$COMPUTER... record to be a
> > 'fixed' random value (ie, not generated by the LDAP backend). =20
> >=20
> > OpenLDAP objects to us setting it's entryUUID values.  My questions is:
> > does the invocationID need to match the objectGUID on that entry?
>=20
> Hi Andrew,
>=20
> in the "load schema by default" patch I changed our way to handle this.
>=20
> so the objectGUID will always be generated by the backend, and we don't
> need a special rule for it. And the invocationId will be set by the
> caller as it's currently.

So, in your patch it seems like we no longer support having a fixed
domain GUID (and therefore need to setup the DNS zone every time)?

> Normaly the first objectGUID and invocationId match on the first
> installed DC in a forest. On all other DC it doesn't match,
> because the new DC chooses its invocationID before the NTDS Settings
> object is created via DsAddEntry() on the other DC, the reply of
> DsAddEntry() returns then the objectGUID of the object.
>=20
> So we should just remove all objectGUID: elements from our ldif files.
> Windows also doesn't allow a caller to specify the objectGUID and our
> repl_meta_data module also rejects it.

OK.  I'll handle it that way for the short term.

I've been looking over your patch, and I'm still not comfortable with
the schema changes.  We should be able to extend our schema, so while
the unixName stuff should go away, we must be able to load something
else...

'@'unixName doesn't seem quite right at all.=20

Andrew Bartlett

--=20
Andrew Bartlett                                http://samba.org/~abartlet/
Authentication Developer, Samba Team           http://samba.org
Samba Developer, Red Hat Inc.                  http://redhat.com


--=-6M/HpvnaEsj8fqFj4rMo
Content-Type: application/pgp-signature; name=signature.asc
Content-Description: This is a digitally signed message part

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (GNU/Linux)

iD8DBQBGNLYUz4A8Wyi0NrsRAkbZAKCw3lcbYPgHR6mHtYgK+7CNnmR6fQCfcEs4
8tJdG5KaVS9zZlmrRXy6EEY=
=7jF+
-----END PGP SIGNATURE-----

--=-6M/HpvnaEsj8fqFj4rMo--

