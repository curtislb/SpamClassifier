From bounce-debian-laptop=ktwarwic=speedy.uwaterloo.ca@lists.debian.org  Fri Apr 20 16:34:51 2007
Return-Path: <bounce-debian-laptop=ktwarwic=speedy.uwaterloo.ca@lists.debian.org>
Received: from murphy.debian.org (murphy.debian.org [70.103.162.31])
	by speedy.uwaterloo.ca (8.12.8/8.12.5) with ESMTP id l3KKYo0I010788
	for <ktwarwic@speedy.uwaterloo.ca>; Fri, 20 Apr 2007 16:34:50 -0400
Received: from localhost (localhost [127.0.0.1])
	by murphy.debian.org (Postfix) with QMQP
	id B5ED22F414; Fri, 20 Apr 2007 15:34:03 -0500 (CDT)
Old-Return-Path: <sylvain.archenault@laposte.net>
X-Spam-Checker-Version: SpamAssassin 3.1.4 (2006-07-26) on murphy.debian.org
X-Spam-Level: 
X-Spam-Status: No, score=-7.0 required=4.0 tests=BAYES_00,IMPRONONCABLE_2,
	LDOSUBSCRIBER autolearn=no version=3.1.4
X-Original-To: debian-laptop@lists.debian.org
Received: from smtp6-g19.free.fr (smtp6-g19.free.fr [212.27.42.36])
	by murphy.debian.org (Postfix) with ESMTP id 5F1992DF18
	for <debian-laptop@lists.debian.org>; Fri, 20 Apr 2007 15:33:50 -0500 (CDT)
Received: from [192.168.0.4] (men91-1-88-168-89-156.fbx.proxad.net [88.168.89.156])
	by smtp6-g19.free.fr (Postfix) with ESMTP id 39E276D4BC
	for <debian-laptop@lists.debian.org>; Fri, 20 Apr 2007 22:33:43 +0200 (CEST)
Message-ID: <462923A6.2070102@laposte.net>
Date: Fri, 20 Apr 2007 22:33:42 +0200
From: Sylvain Archenault <sylvain.archenault@laposte.net>
User-Agent: Icedove 1.5.0.10 (X11/20070329)
MIME-Version: 1.0
To: debian-laptop@lists.debian.org
Subject: Dual screen and Macbook
X-Enigmail-Version: 0.94.2.0
Content-Type: multipart/mixed;
 boundary="------------060003090500060601000904"
X-Rc-Virus: 2006-10-25_01
X-Rc-Spam: 2007-04-19_01
Resent-Message-ID: <SeKqID.A.z_.7OSKGB@murphy>
Resent-From: debian-laptop@lists.debian.org
X-Mailing-List: <debian-laptop@lists.debian.org> archive/latest/31216
X-Loop: debian-laptop@lists.debian.org
List-Id: <debian-laptop.lists.debian.org>
List-Post: <mailto:debian-laptop@lists.debian.org>
List-Help: <mailto:debian-laptop-request@lists.debian.org?subject=help>
List-Subscribe: <mailto:debian-laptop-request@lists.debian.org?subject=subscribe>
List-Unsubscribe: <mailto:debian-laptop-request@lists.debian.org?subject=unsubscribe>
Precedence: list
Resent-Sender: debian-laptop-request@lists.debian.org
Resent-Date: Fri, 20 Apr 2007 15:34:03 -0500 (CDT)
Status: O
Content-Length: 8332
Lines: 254

This is a multi-part message in MIME format.
--------------060003090500060601000904
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit

Hello,

I'm trying to get dual screen working on my macbook (Debian sid). But it
doesn't work after further different configuration.

With the attached configuration, X crash :
(II) intel(0): Kernel reported 104960 total, 1 used
(II) intel(0): I830CheckAvailableMemory: 419836 kB available
(==) intel(0): VideoRam: 262144 KB
(II) intel(0): Attempting memory allocation with tiled buffers and
               large DRI memory manager reservation:
(WW) intel(0): xf86AllocateGARTMemory: allocation of 10 pages failed
        (Cannot allocate memory)
(II) intel(1): Allocating 0 scanlines for pixmap cache

Backtrace:
0: /usr/bin/X11/X(xf86SigHandler+0x84) [0x80c20e4]
1: [0xb7f45420]
2: /usr/lib/xorg/modules/drivers//i810_drv.so [0xb7b8fec0]
3: /usr/lib/xorg/modules/drivers//i810_drv.so [0xb7b90e6e]
4:
/usr/lib/xorg/modules/drivers//i810_drv.so(i830_allocate_2d_memory+0x131)
[0xb7b91161]
5: /usr/lib/xorg/modules/drivers//i810_drv.so [0xb7b8cf2e]
6: /usr/bin/X11/X(AddScreen+0x1ed) [0x806f8ad]
7: /usr/bin/X11/X(InitOutput+0x22e) [0x80a14ae]
8: /usr/bin/X11/X(main+0x27b) [0x807004b]
9: /lib/i686/cmov/libc.so.6(__libc_start_main+0xd8) [0xb7d5a878]
10: /usr/bin/X11/X(FontFileCompleteXLFD+0xad) [0x806f591]

Fatal server error:
Caught signal 11.  Server aborting



lspci | egrep -i 'vga|display|graphic'
00:02.0 VGA compatible controller: Intel Corporation Mobile
945GM/GMS/940GML Express Integrated Graphics Controller (rev 03)
00:02.1 Display controller: Intel Corporation Mobile 945GM/GMS/940GML
Express Integrated Graphics Controller (rev 03)

I also tried to use both busID 02.0 and 02.1 without success.


Thanks for your help.

-- 
Sylvain Archenault

--------------060003090500060601000904
Content-Type: text/plain;
 name="xorg.conf.dual"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="xorg.conf.dual"

# /etc/X11/xorg.conf (xorg X Window System server configuration file)
#
# This file was generated by dexconf, the Debian X Configuration tool, using
# values from the debconf database.
#
# Edit this file with caution, and see the /etc/X11/xorg.conf manual page.
# (Type "man /etc/X11/xorg.conf" at the shell prompt.)
#
# This file is automatically updated on xserver-xorg package upgrades *only*
# if it has not been modified since the last upgrade of the xserver-xorg
# package.
#
# If you have edited this file but would like it to be automatically updated
# again, run the following command:
#   sudo dpkg-reconfigure -phigh xserver-xorg

Section "Files"
        FontPath        "/usr/share/fonts/X11/misc"
        FontPath        "/usr/X11R6/lib/X11/fonts/misc"
        FontPath        "/usr/share/fonts/X11/cyrillic"
        FontPath        "/usr/X11R6/lib/X11/fonts/cyrillic"
        FontPath        "/usr/share/fonts/X11/100dpi/:unscaled"
        FontPath        "/usr/X11R6/lib/X11/fonts/100dpi/:unscaled"
        FontPath        "/usr/share/fonts/X11/75dpi/:unscaled"
        FontPath        "/usr/X11R6/lib/X11/fonts/75dpi/:unscaled"
        FontPath        "/usr/share/fonts/X11/Type1"
        FontPath        "/usr/X11R6/lib/X11/fonts/Type1"
        FontPath        "/usr/share/fonts/X11/100dpi"
        FontPath        "/usr/X11R6/lib/X11/fonts/100dpi"
        FontPath        "/usr/share/fonts/X11/75dpi"
        FontPath        "/usr/X11R6/lib/X11/fonts/75dpi"
        # path to defoma fonts
        FontPath        "/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType"
EndSection

Section "Module"
        Load    "i2c"
        Load    "bitmap"
        Load    "ddc"
        Load    "dri"
        Load    "extmod"
        Load    "freetype"
        Load    "glx"
        Load    "int10"
        Load    "type1"
        Load    "vbe"
EndSection

Section "InputDevice"
        Identifier      "Generic Keyboard"
        Driver          "kbd"
        Option          "CoreKeyboard"
        Option          "XkbRules"    "xorg"
        Option          "XkbModel"    "pc104"
        Option          "XkbLayout"   "us"
        Option          "XkbOptions"  "ctrl:nocaps"
EndSection

Section "InputDevice"
        Identifier      "Configured Mouse"
        Driver          "mouse"
        Option          "CorePointer"
        Option          "Device"              "/dev/input/mice"
        Option          "Protocol"            "ExplorerPS/2"
        Option          "Emulate3Buttons"     "true"
EndSection

Section "InputDevice"
        Identifier      "Synaptics Touchpad"
        Driver          "synaptics"
        Option          "SendCoreEvents"      "true"
        Option          "Device"              "/dev/psaux"
        Option          "Protocol"            "auto-dev"
        Option          "HorizScrollDelta"    "0"
EndSection

Section "Device"
        Identifier      "Generic Video Card"
        Driver          "i810"
        Screen          0
        Option "MonitorLayout" "CRT,LFP"
        BusID           "PCI:0:2:0"
EndSection

Section "Device"
        Identifier      "Device1"
        Driver          "i810"
        Screen          1
        Option "MonitorLayout" "CRT,LFP"
        BusID           "PCI:0:2:0"
EndSection

Section "Monitor"
        Identifier      "Generic Monitor"
        Option          "DPMS"
        HorizSync       28-64
        VertRefresh     43-60
EndSection

Section "Monitor"
        Identifier      "External Monitor"
        Option          "DPMS"
        HorizSync       28-64
        VertRefresh     43-60
EndSection

Section "Screen"
        Identifier      "Default Screen"
        Device          "Generic Video Card"
        Monitor         "Generic Monitor"
        DefaultDepth    24
        SubSection "Display"
                Depth           1
                Modes           "1280x800" "1024x768" "800x600" "640x480"
        EndSubSection
        SubSection "Display"
                Depth           4
                Modes           "1280x800" "1024x768" "800x600" "640x480"
        EndSubSection
        SubSection "Display"
                Depth           8
                Modes           "1280x800" "1024x768" "800x600" "640x480"
        EndSubSection
        SubSection "Display"
                Depth           15
                Modes           "1280x800" "1024x768" "800x600" "640x480"
        EndSubSection
        SubSection "Display"
                Depth           16
                Modes           "1280x800" "1024x768" "800x600" "640x480"
        EndSubSection
        SubSection "Display"
                Depth           24
                Modes           "1280x800" "1024x768" "800x600" "640x480"
        EndSubSection
EndSection

Section "Screen"
        Identifier "Secondary Screen"
        Device "Device1"
        Monitor "External Monitor"
        DefaultDepth 24
        SubSection "Display"
                   Depth 1
                   Modes "1024x768" "800x600"
        EndSubSection
        SubSection "Display"
                   Depth 4
                   Modes "1024x768" "800x600"
        EndSubSection
        SubSection "Display"
                   Depth 8
                   Modes "1024x768" "800x600"
        EndSubSection
        SubSection "Display"
                   Depth 16
                   Modes "1024x768" "800x600"
        EndSubSection
        SubSection "Display"
                   Depth 24
                   Modes "1024x768" "800x600"
        EndSubSection
EndSection

#Section "ServerLayout"
#       Identifier      "Default Layout"
#       Screen          "Default Screen"
#       InputDevice     "Generic Keyboard"
#       InputDevice     "Configured Mouse"
#       InputDevice     "Synaptics Touchpad"
#EndSection

Section "ServerLayout"
        Identifier "Dual-monitor Layout"
        Screen 0 "Default Screen"
        Screen 1 "Secondary Screen" LeftOf "Default Screen"
        # Option "Clone" "On"
        #Option "Xinerama" "On"
        InputDevice "Generic Keyboard"
        InputDevice "Configured Mouse"
        InputDevice "Synaptics Touchpad"
EndSection

Section "DRI"
        Mode    0666
EndSection

--------------060003090500060601000904--


-- 
To UNSUBSCRIBE, email to debian-laptop-REQUEST@lists.debian.org
with a subject of "unsubscribe". Trouble? Contact listmaster@lists.debian.org

