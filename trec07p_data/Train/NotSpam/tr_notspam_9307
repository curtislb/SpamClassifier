From beginners-return-91524-ktwarwic=speedy.uwaterloo.ca@perl.org  Thu May 10 19:05:51 2007
Return-Path: <beginners-return-91524-ktwarwic=speedy.uwaterloo.ca@perl.org>
Received: from lists.develooper.com (x6.develooper.com [63.251.223.186])
	by flax9.uwaterloo.ca (8.12.8/8.12.5) with SMTP id l4AN5oqD015619
	for <ktwarwic@flax9.uwaterloo.ca>; Thu, 10 May 2007 19:05:51 -0400
Received: (qmail 9781 invoked by uid 514); 10 May 2007 23:05:44 -0000
Mailing-List: contact beginners-help@perl.org; run by ezmlm
Precedence: bulk
List-Post: <mailto:beginners@perl.org>
List-Help: <mailto:beginners-help@perl.org>
List-Unsubscribe: <mailto:beginners-unsubscribe@perl.org>
List-Subscribe: <mailto:beginners-subscribe@perl.org>
List-Id: <beginners.perl.org>
Delivered-To: mailing list beginners@perl.org
Received: (qmail 9772 invoked from network); 10 May 2007 23:05:44 -0000
Received: from x1a.develooper.com (HELO x1.develooper.com) (216.52.237.111)
  by lists.develooper.com with SMTP; 10 May 2007 23:05:44 -0000
Received: (qmail 19087 invoked by uid 225); 10 May 2007 23:05:44 -0000
Delivered-To: beginners@perl.org
Received: (qmail 19080 invoked by alias); 10 May 2007 23:05:43 -0000
X-Spam-Status: No, hits=-2.6 required=8.0
	tests=BAYES_00,DKIM_POLICY_SIGNSOME,DK_POLICY_SIGNSOME,DK_POLICY_TESTING,SPF_PASS
X-Spam-Check-By: la.mx.develooper.com
Received-SPF: pass (x1.develooper.com: local policy)
Received: from elasmtp-curtail.atl.sa.earthlink.net (HELO elasmtp-curtail.atl.sa.earthlink.net) (209.86.89.64)
    by la.mx.develooper.com (qpsmtpd/0.28) with ESMTP; Thu, 10 May 2007 16:05:28 -0700
Received: from [4.158.138.168] (helo=[4.158.138.168])
	by elasmtp-curtail.atl.sa.earthlink.net with asmtp (Exim 4.34)
	id 1HmHhL-0005Cf-Q2
	for beginners@perl.org; Thu, 10 May 2007 19:05:24 -0400
Message-ID: <4643936E.8020408@earthlink.net>
Date: Thu, 10 May 2007 16:49:34 -0500
From: "Mumia W." <mumia.w.18.spam+nospam@earthlink.net>
User-Agent: Thunderbird 1.5.0.10 (X11/20070221)
MIME-Version: 1.0
To: Beginners List <beginners@perl.org>
Subject: Re: regexp
References: <645922.67246.qm@web63414.mail.re1.yahoo.com>
In-Reply-To: <645922.67246.qm@web63414.mail.re1.yahoo.com>
Content-Type: text/plain; charset=iso-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-ELNK-Trace: 5d730262a02eef364886dd14879fb8dbda7403c53f5cc7e274bf435c0eb9d47811eb5c9aa44f2a66d0274037b89b6da4db1a844c5709ecbe350badd9bab72f9c
X-Originating-IP: 4.158.138.168

On 05/10/2007 12:54 PM, oryann9 wrote:
> [...]
> The strings I need out of this are:
> 
> msgagt=ESM_WMB_AIX
> 
> sec_id=Sec_id
> 
> severity=Low
> 
> msgnode=qwmbap01.cardinalhealth.net
> 
> utc={2007-04-26 18:01:59.472+00:00}
> 
> om={
> 
> UID=3a7affd6-f420-11db-80b1-000000000000
> 
> AlertCode=AEM001
> 
> AlertType=AEM-default
> 
> AppName=AEM-CommonService2
> 
> Message=5004:An error has been reported by the
> BIPXML4C component.:XML
> 
> }
> 
> [...]

You could try it this way:

#!/usr/bin/perl
use strict;
use warnings;
use Data::Dumper;

my $data = do { local $/; <DATA> };

my $regex = '
     ((?:msgagt|sec_id|severity|msgnode)=[\w.]+)
     |
     ((?:utc|om)={[^}]+})
';

my @gotten = grep defined, $data =~ m/$regex/gx;
@gotten = map {
     s/{([^}]+)}/
         my $value = $1;
         $value =~ s{\s+}{}g;
         $value =~ s{,}{\n}g;
         $value;
     /e;
     $_;
} @gotten;
print Dumper(\@gotten);


__DATA__
Node:          dudbqa02 Message group: MoM_OpC_ADM-m-s
Application:   OGTP Object:        syslog Severity:
   Critical Text:          WebSph

ere Broker v6003[2998366]:
(QWMB01.EG500)[8225]BIP2951I: Event generated by user
code. Additional information :
'msgagt=ESM_WMB_AIX,sec_id=Sec

_id,severity=Low,msgnode=qwmbap01.cardinalhealth.net,utc={2007-04-26
18:01:59.472+00:00},om={UID=3a7affd6-f420-11db-80b1-000000000000,AlertCod

e=AEM001,AlertType=AEM-default,AppName=AEM-CommonService2,Message=5004:An
error has been reported by the BIPXML4C
component.:XML}' 'MS_Alert_E

SM_Integrator.InsertToSYSLOG' '{2}' '{3}' '{4}' '{5}'
'{6}' '{7}' '{8}' '{9}' :
QWMB01.1aef50ec-1001-0000-0080-dae5df22a0ad:
/build/S600_P/src

/DataFlowEngine/ImbRdl/ImbRdlThrowExceptionStatements.cpp:
158: SqlThrowExceptionStatement::execute:
ComIbmComputeNode: MS_Alert_ESM_Integrato

r#FCMComposite_1_2,cma={Location=Not_found,BusUnit=Not_found}

__HTH__


-- 
To unsubscribe, e-mail: beginners-unsubscribe@perl.org
For additional commands, e-mail: beginners-help@perl.org
http://learn.perl.org/


