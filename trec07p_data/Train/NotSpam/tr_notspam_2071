From samba-cvs-bounces+ktwarwic=speedy.uwaterloo.ca@lists.samba.org  Mon Apr 16 10:30:16 2007
Return-Path: <samba-cvs-bounces+ktwarwic=speedy.uwaterloo.ca@lists.samba.org>
Received: from lists.samba.org (mail.samba.org [66.70.73.150])
	by speedy.uwaterloo.ca (8.12.8/8.12.5) with ESMTP id l3GEUF0I014615
	for <ktwarwic@speedy.uwaterloo.ca>; Mon, 16 Apr 2007 10:30:15 -0400
Received: from dp.samba.org (localhost [127.0.0.1])
	by lists.samba.org (Postfix) with ESMTP id F2E881638A9
	for <ktwarwic@speedy.uwaterloo.ca>; Mon, 16 Apr 2007 14:29:51 +0000 (GMT)
X-Spam-Checker-Version: SpamAssassin 3.1.7 (2006-10-05) on dp.samba.org
X-Spam-Level: 
X-Spam-Status: No, score=1.0 required=3.8 tests=BAYES_50,NO_REAL_NAME 
	autolearn=no version=3.1.7
X-Original-To: samba-cvs@samba.org
Delivered-To: samba-cvs@samba.org
Received: from mtagate2.uk.ibm.com (mtagate2.uk.ibm.com [195.212.29.135])
	by lists.samba.org (Postfix) with ESMTP id 92D2E1639AD
	for <samba-cvs@samba.org>; Mon, 16 Apr 2007 14:29:17 +0000 (GMT)
Received: from d06nrmr1407.portsmouth.uk.ibm.com
	(d06nrmr1407.portsmouth.uk.ibm.com [9.149.38.185])
	by mtagate2.uk.ibm.com (8.13.8/8.13.8) with ESMTP id l3GETGaN073708
	for <samba-cvs@samba.org>; Mon, 16 Apr 2007 14:29:16 GMT
Received: from d06av01.portsmouth.uk.ibm.com (d06av01.portsmouth.uk.ibm.com
	[9.149.37.212])
	by d06nrmr1407.portsmouth.uk.ibm.com (8.13.8/8.13.8/NCO v8.3) with
	ESMTP id l3GETGff2834642
	for <samba-cvs@samba.org>; Mon, 16 Apr 2007 15:29:16 +0100
Received: from d06av01.portsmouth.uk.ibm.com (loopback [127.0.0.1])
	by d06av01.portsmouth.uk.ibm.com (8.12.11.20060308/8.13.3) with ESMTP
	id l3GETGse027132
	for <samba-cvs@samba.org>; Mon, 16 Apr 2007 15:29:16 +0100
Received: from localhost (linux-psomogyi.bud.hu.ibm.com [9.157.226.68])
	by d06av01.portsmouth.uk.ibm.com (8.12.11.20060308/8.12.11) with SMTP
	id l3GETF74027107
	for <samba-cvs@samba.org>; Mon, 16 Apr 2007 15:29:15 +0100
Date: Mon, 16 Apr 2007 16:28:31 +0200
From: psomogyi@gamax.hu
To: samba-cvs@samba.org
Message-ID: <4623880f.sniOjLlk9S1b+fM+%psomogyi@gamax.hu>
User-Agent: nail 11.25 7/29/05
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Subject: Rev 73: merged tridge's branch  in
 http://samba.org/~tridge/psomogyi/
X-BeenThere: samba-cvs@lists.samba.org
X-Mailman-Version: 2.1.5
Precedence: list
Reply-To: samba-technical@lists.samba.org
List-Id: Samba CVS and subversion commit messages <samba-cvs.lists.samba.org>
List-Unsubscribe: <https://lists.samba.org/mailman/listinfo/samba-cvs>,
	<mailto:samba-cvs-request@lists.samba.org?subject=unsubscribe>
List-Archive: <http://lists.samba.org/archive/samba-cvs>
List-Post: <mailto:samba-cvs@lists.samba.org>
List-Help: <mailto:samba-cvs-request@lists.samba.org?subject=help>
List-Subscribe: <https://lists.samba.org/mailman/listinfo/samba-cvs>,
	<mailto:samba-cvs-request@lists.samba.org?subject=subscribe>
Sender: samba-cvs-bounces+ktwarwic=speedy.uwaterloo.ca@lists.samba.org
Errors-To: samba-cvs-bounces+ktwarwic=speedy.uwaterloo.ca@lists.samba.org
Status: O
Content-Length: 55658
Lines: 1118

------------------------------------------------------------
revno: 73
revision-id: psomogyi@gamax.hu-20070416142829-iglfqwwgka38risg
parent: psomogyi@gamax.hu-20070329164602-mvke1cynxguwrpyu
parent: tridge@samba.org-20070416130336-89ba103e570a8324
committer: Peter Somogyi <psomogyi@gamax.hu>
branch nick: ctdb
timestamp: Mon 2007-04-16 16:28:29 +0200
message:
  merged tridge's branch 
added:
  common/ctdb_client.c           ctdb_client.c-20070411010216-3kd8v37k61steeya-1
  common/ctdb_daemon.c           ctdb_daemon.c-20070409200331-3el1kqgdb9m4ib0g-1
  common/ctdb_io.c               ctdb_io.c-20070409200335-dzfc7f3rra5rcf60-1
  config.mk                      config.mk-20070416041303-xql6zaaq90w8kovl-1
  direct/                        direct-20070411085038-phusiewluwzyqjpc-1
  direct/README                  readme-20070411085353-evbh8j3q762w3azh-1
  direct/ctdbd.c                 ctdbd.c-20070411085044-dqmhr6mfeexnyt4m-1
  direct/ctdbd.sh                ctdbd.sh-20070411085038-phusiewluwzyqjpc-2
  direct/ctdbd_test.c            ctdbd_test.c-20070411085057-17kgjzfktsh28g99-1
  direct/nodes.txt               nodes.txt-20070411085104-tprj7cr1u6o5i7xm-1
  tests/bench1.sh                bench1.sh-20070405031753-caneu8tv5v8e93ws-1
  tests/cmdline.c                cmdline.c-20070416041216-w1zvz91bkdsgjckw-1
  tests/cmdline.h                cmdline.h-20070416041216-w1zvz91bkdsgjckw-2
  tests/ctdb_fetch.c             ctdb_fetch.c-20070405031748-f7gslozfj3rwh5ie-1
  tests/ctdb_fetch1.c            ctdb_fetch1.c-20070412111848-xawz6wqk9r0v8jdk-1
  tests/ctdb_messaging.c         ctdb_messaging.c-20070411034205-6d6vne56pbih2x1p-1
  tests/fetch.sh                 fetch.sh-20070405031756-lomzqpjyqg3xd1kv-1
  tests/fetch1.sh                fetch1.sh-20070412111854-6s84l3myac9ncl79-1
  tests/lockwait.c               lockwait.c-20070416055753-3ztnb4cxqgamfudx-1
  tests/messaging.sh             messaging.sh-20070411034158-e1c175kqm9vzasb6-1
renamed:
  ctdb_bench.c => tests/ctdb_bench.c ctdb_bench.c-20061219052637-2liagoglohxb6p7s-1
  ctdb_test.c => tests/ctdb_test.c ctdb_test.c-20061117234101-o3qt14umlg9en8z0-16
  nodes.txt => tests/nodes.txt nodes.txt-20061118043428-8lz9unytgcsndgia-1
modified:
  Makefile.in                    makefile.in-20061117234101-o3qt14umlg9en8z0-1
  common/ctdb.c                  ctdb.c-20061127094323-t50f58d65iaao5of-2
  common/ctdb_call.c             ctdb_call.c-20061128065342-to93h6eejj5kon81-1
  common/ctdb_ltdb.c             ctdb_ltdb.c-20061128065342-to93h6eejj5kon81-2
  common/ctdb_message.c          ctdb_message.c-20070208224107-9dnio7x7z33prrmt-1
  common/ctdb_util.c             ctdb_util.c-20061128065342-to93h6eejj5kon81-3
  common/util.c                  util.c-20061117234101-o3qt14umlg9en8z0-20
  configure.ac                   configure.ac-20061117234101-o3qt14umlg9en8z0-10
  ib/ibw_ctdb.c                  ibw_ctdb.c-20070102171255-7krov7858dqza466-1
  ib/ibw_ctdb.h                  ibw_ctdb.h-20070102171259-nmuvtzt98aqzg7xp-1
  ib/ibw_ctdb_init.c             ibw_ctdb_init.c-20070102171305-cn2z4k7ibx8141d5-1
  ib/ibwrapper_test.c            ibwrapper_test.c-20061214171730-h11a2z5ed6pt66hj-1
  include/ctdb.h                 ctdb.h-20061117234101-o3qt14umlg9en8z0-11
  include/ctdb_private.h         ctdb_private.h-20061117234101-o3qt14umlg9en8z0-13
  include/includes.h             includes.h-20061117234101-o3qt14umlg9en8z0-17
  lib/tdb/autogen.sh             autogen.sh-20070125040949-7t3f5zdl1q4z9hyv-61
  lib/tdb/common/dump.c          dump.c-20070220022425-m1wibgjq7n5hahs6-2
  lib/tdb/common/freelistcheck.c freelistcheck.c-20070220022425-m1wibgjq7n5hahs6-5
  lib/tdb/common/io.c            io.c-20070220022425-m1wibgjq7n5hahs6-6
  lib/tdb/common/lock.c          lock.c-20070220022425-m1wibgjq7n5hahs6-7
  lib/tdb/common/open.c          open.c-20070220022425-m1wibgjq7n5hahs6-8
  lib/tdb/common/tdb.c           tdb.c-20070220022425-m1wibgjq7n5hahs6-9
  lib/tdb/common/tdb_private.h   tdb_private.h-20070220022425-m1wibgjq7n5hahs6-10
  lib/tdb/common/transaction.c   transaction.c-20070220022425-m1wibgjq7n5hahs6-11
  lib/tdb/config.mk              config.mk-20070125040949-7t3f5zdl1q4z9hyv-63
  lib/tdb/include/config.h.in    config.h.in-20070125040949-7t3f5zdl1q4z9hyv-100
  lib/tdb/include/tdb.h          tdb.h-20070125040949-7t3f5zdl1q4z9hyv-101
  lib/tdb/tdb.pc                 tdb.pc-20070125040949-7t3f5zdl1q4z9hyv-71
  lib/tdb/tools/tdbtest.c        tdbtest.c-20070125040949-7t3f5zdl1q4z9hyv-107
  lib/tdb/tools/tdbtool.c        tdbtool.c-20070125040949-7t3f5zdl1q4z9hyv-108
  tcp/ctdb_tcp.h                 ctdb_tcp.h-20061127103747-l8xeniwiapbydehq-3
  tcp/tcp_connect.c              tcp_connect.c-20061128004937-x70q1cu5xzg5g2tm-1
  tcp/tcp_init.c                 tcp_init.c-20061128004937-x70q1cu5xzg5g2tm-2
  tcp/tcp_io.c                   tcp_io.c-20061128004937-x70q1cu5xzg5g2tm-3
  tests/bench.sh                 bench.sh-20070209014602-vdolpr6esqsa58s7-1
  tests/test.sh                  test.sh-20061128065333-cla80zaxd9eb4o4a-2
  tests/test1.sh                 test1.sh-20061130223403-jednzcvm60m0j75c-1
  tests/ctdb_bench.c             ctdb_bench.c-20061219052637-2liagoglohxb6p7s-1
  tests/ctdb_test.c              ctdb_test.c-20061117234101-o3qt14umlg9en8z0-16
    ------------------------------------------------------------
    revno: 44.1.70
    merged: tridge@samba.org-20070416130336-89ba103e570a8324
    parent: tridge@samba.org-20070416125258-ea015571e2818a42
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Mon 2007-04-16 23:03:36 +1000
    message:
      added a tdb_chainlock_nonblock() call to tdb
    ------------------------------------------------------------
    revno: 44.1.69
    merged: tridge@samba.org-20070416125258-ea015571e2818a42
    parent: tridge@samba.org-20070416124937-1a78f1fe8ec2719f
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Mon 2007-04-16 22:52:58 +1000
    message:
      merge local copy of tdb from samba4 tdb
    ------------------------------------------------------------
    revno: 44.1.68
    merged: tridge@samba.org-20070416124937-1a78f1fe8ec2719f
    parent: tridge@samba.org-20070416060137-6d90f720fec05ba5
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Mon 2007-04-16 22:49:37 +1000
    message:
      fixed a fd bug (thanks volker)
    ------------------------------------------------------------
    revno: 44.1.67
    merged: tridge@samba.org-20070416060137-6d90f720fec05ba5
    parent: tridge@samba.org-20070416041310-3f6200073a57aeff
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Mon 2007-04-16 16:01:37 +1000
    message:
      this is a demonstration of an idea for handling locks in ctdb.
      
      The problem we have is this:
      
        - we want the client smbd processes to be able to 'shortcut' access
          to the ltdb, by directly accessing the ltdb, and if the header of
          the record shows we are the dmaster then process immediately, with
          no overhead of talking across the unix domain socket
      
        - a client doing a shortcut will use tdb_chainlock() to lock the
          record while processing
      
        - we want the main ctdb daemon to be able to set locks on the
          record, and when those locks collide with a 'shortcut' fcntl lock,
          we want the ctdb daemon to keep processing other operations
      
        - we don't want to have to send a message from a smbd client to the
          ctdbd each time it releases a lock
      
      The solution is shown in this example. Note that the expensive fork()
      and blocking lock is only paid in case of contention, so in the median
      case I think this is zero cost.
    ------------------------------------------------------------
    revno: 44.1.66
    merged: tridge@samba.org-20070416041310-3f6200073a57aeff
    parent: tridge@samba.org-20070416041250-3144d3c129a02c39
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Mon 2007-04-16 14:13:10 +1000
    message:
      merged from samba4
    ------------------------------------------------------------
    revno: 44.1.65
    merged: tridge@samba.org-20070416041250-3144d3c129a02c39
    parent: tridge@samba.org-20070416003139-ac731d5336e759e3
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Mon 2007-04-16 14:12:50 +1000
    message:
      pull out common command line code for tests into tests/cmdline.c
    ------------------------------------------------------------
    revno: 44.1.64
    merged: tridge@samba.org-20070416003139-ac731d5336e759e3
    parent: tridge@samba.org-20070416002144-34daa28d0f1d01db
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Mon 2007-04-16 10:31:39 +1000
    message:
      merge CTDB_SRVID_ALL patch from Samba4
    ------------------------------------------------------------
    revno: 44.1.63
    merged: tridge@samba.org-20070416002144-34daa28d0f1d01db
    parent: tridge@samba.org-20070415232910-a604c82b6945e169
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Mon 2007-04-16 10:21:44 +1000
    message:
      - fix includes to work in both samba4 and ctdb standalone
      - when we do a store_unlock the lock record becomes unlocked, so we
        must destroy it (or we leak memory)
    ------------------------------------------------------------
    revno: 44.1.62
    merged: tridge@samba.org-20070415232910-a604c82b6945e169
    parent: tridge@samba.org-20070415225857-c848786395133f34
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Mon 2007-04-16 09:29:10 +1000
    message:
      added --dblist option to ctdbd, to allow list of databases to be specified on the command line
    ------------------------------------------------------------
    revno: 44.1.61
    merged: tridge@samba.org-20070415225857-c848786395133f34
    parent: tridge@samba.org-20070414104443-0b90a6105ca1c1d5
    parent: ronniesahlberg@gmail.com-20070415223727-ps2603m9yf67eprd
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Mon 2007-04-16 08:58:57 +1000
    message:
      merge from ronnie
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.20
        merged: ronniesahlberg@gmail.com-20070415223727-ps2603m9yf67eprd
        parent: ronniesahlberg@gmail.com-20070415043923-xyrm8hzk0cttscdk
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Mon 2007-04-16 08:37:27 +1000
        message:
          add code to fetch1 test to tell the two child processes one at a time to fetch_lock the same record
          
          they both successfully fetch and lock the same record at this stage  but when the actual locking works properly  the second child will block.
          
          this test allows us to verify the blocking once we have implemented it
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.19
        merged: ronniesahlberg@gmail.com-20070415043923-xyrm8hzk0cttscdk
        parent: ronniesahlberg@gmail.com-20070415040239-383gb8czso022sql
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Sun 2007-04-15 14:39:23 +1000
        message:
          add examples for volker on how to do fetchlock/storeunlock
          
          
          note that the actual locking/unl;ocking does not still work
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.18
        merged: ronniesahlberg@gmail.com-20070415040239-383gb8czso022sql
        parent: ronniesahlberg@gmail.com-20070414214135-l3f8z7kruoc30wiv
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Sun 2007-04-15 14:02:39 +1000
        message:
          update to fetch1.sh test
          
          there is still a bug in the ctdb code in that the children no longer receive messages from the parent for unknown reasons
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.17
        merged: ronniesahlberg@gmail.com-20070414214135-l3f8z7kruoc30wiv
        parent: ronniesahlberg@gmail.com-20070413111020-b1h85vmf9a931fkn
        parent: tridge@samba.org-20070414104443-0b90a6105ca1c1d5
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Sun 2007-04-15 07:41:35 +1000
        message:
          merge from tridge
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.16
        merged: ronniesahlberg@gmail.com-20070413111020-b1h85vmf9a931fkn
        parent: ronniesahlberg@gmail.com-20070413103741-t7jc7c48i2rl2v1d
        parent: tridge@samba.org-20070413103824-0c5e1dbd679c73bd
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Fri 2007-04-13 21:10:20 +1000
        message:
          merge from tridge
    ------------------------------------------------------------
    revno: 44.1.60
    merged: tridge@samba.org-20070414104443-0b90a6105ca1c1d5
    parent: tridge@samba.org-20070413103824-0c5e1dbd679c73bd
    parent: ronniesahlberg@gmail.com-20070413103741-t7jc7c48i2rl2v1d
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Sat 2007-04-14 20:44:43 +1000
    message:
      merge from ronnie
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.15
        merged: ronniesahlberg@gmail.com-20070413103741-t7jc7c48i2rl2v1d
        parent: ronniesahlberg@gmail.com-20070412234456-b80kjt2dz2213ijc
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Fri 2007-04-13 20:37:41 +1000
        message:
          add missing code to store_unlock so that the data that a client writes is stored in ltdb
          
          this makes it possible to do fetch_lock and store_unlock across a domain socket to read/write data.
          
          
          note that the actual locking is NOT implemented yet
    ------------------------------------------------------------
    revno: 44.1.59
    merged: tridge@samba.org-20070413103824-0c5e1dbd679c73bd
    parent: tridge@samba.org-20070413054933-80991e4c45e8d3ec
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Fri 2007-04-13 20:38:24 +1000
    message:
      private -> private_data for samba3
    ------------------------------------------------------------
    revno: 44.1.58
    merged: tridge@samba.org-20070413054933-80991e4c45e8d3ec
    parent: tridge@samba.org-20070412113216-fee7ab5e7b68876e
    parent: ronniesahlberg@gmail.com-20070412234456-b80kjt2dz2213ijc
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Fri 2007-04-13 15:49:33 +1000
    message:
      merge store_unlock code from ronnie
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.14
        merged: ronniesahlberg@gmail.com-20070412234456-b80kjt2dz2213ijc
        parent: ronniesahlberg@gmail.com-20070412234115-kwtfpjz5mfbc6m9y
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Fri 2007-04-13 09:44:56 +1000
        message:
          add more elaborate test to fetch1 test
          
          for now:
          fetch a record
          store a known entry for this record
          fetch the record again  (and later verify we got the same record)
          store it back again
          
          this will not work right now since we dont yet store the record inside the daemon
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.13
        merged: ronniesahlberg@gmail.com-20070412234115-kwtfpjz5mfbc6m9y
        parent: ronniesahlberg@gmail.com-20070412113516-3ndq3txmcox96hun
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Fri 2007-04-13 09:41:15 +1000
        message:
          add store_unlock pdu's for the domain socket.
          
          note that the store_unlock does not actually do anything yet apart from passing the pdu from client to daemon   and daemon responds.
          
          next is to make sure the daemon actually stores the data in a database
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.12
        merged: ronniesahlberg@gmail.com-20070412113516-3ndq3txmcox96hun
        parent: ronniesahlberg@gmail.com-20070412111900-wepo4bxsice2f80b
        parent: tridge@samba.org-20070412113216-fee7ab5e7b68876e
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Thu 2007-04-12 21:35:16 +1000
        message:
          merge from tridge
    ------------------------------------------------------------
    revno: 44.1.57
    merged: tridge@samba.org-20070412113216-fee7ab5e7b68876e
    parent: tridge@samba.org-20070412065133-99dc26f997d078f8
    parent: ronniesahlberg@gmail.com-20070412111900-wepo4bxsice2f80b
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Thu 2007-04-12 21:32:16 +1000
    message:
      merge from ronnie
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.11
        merged: ronniesahlberg@gmail.com-20070412111900-wepo4bxsice2f80b
        parent: ronniesahlberg@gmail.com-20070412111710-8p7hdtwnxkj7s961
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Thu 2007-04-12 21:19:00 +1000
        message:
          add the two missing file from the previous commit
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.10
        merged: ronniesahlberg@gmail.com-20070412111710-8p7hdtwnxkj7s961
        parent: ronniesahlberg@gmail.com-20070412111441-z2cmbj9xi2tnv9q3
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Thu 2007-04-12 21:17:10 +1000
        message:
          add a beginning of a new test
          
          right now this test only does one fetch lock   but this will be enhanced as more code is added to ctdb to handle fetch_lock and store_unlock
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.9
        merged: ronniesahlberg@gmail.com-20070412111441-z2cmbj9xi2tnv9q3
        parent: ronniesahlberg@gmail.com-20070412071348-ihjz6gkbzfphsmv3
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Thu 2007-04-12 21:14:41 +1000
        message:
          when sending back a fetch lock reply to a client 
          we cant peek in state->c since this is uninitialized 
          and even if it were not it would be wrong
          
          create a new structure to pass BOTH client and also the reqid to respond back to
          the client with
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.8
        merged: ronniesahlberg@gmail.com-20070412071348-ihjz6gkbzfphsmv3
        parent: ronniesahlberg@gmail.com-20070412064937-g01hesz6aocdbc5l
        parent: tridge@samba.org-20070412065133-99dc26f997d078f8
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Thu 2007-04-12 17:13:48 +1000
        message:
          merge from tridges tree
    ------------------------------------------------------------
    revno: 44.1.56
    merged: tridge@samba.org-20070412065133-99dc26f997d078f8
    parent: tridge@samba.org-20070412005155-1411dc471326a713
    parent: ronniesahlberg@gmail.com-20070412064937-g01hesz6aocdbc5l
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Thu 2007-04-12 16:51:33 +1000
    message:
      merge from ronnie
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.7
        merged: ronniesahlberg@gmail.com-20070412064937-g01hesz6aocdbc5l
        parent: ronniesahlberg@gmail.com-20070412054650-ry0vg3kqxomin29t
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Thu 2007-04-12 16:49:37 +1000
        message:
          dont hardcode gdb in the test script.     ooops
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.6
        merged: ronniesahlberg@gmail.com-20070412054650-ry0vg3kqxomin29t
        parent: ronniesahlberg@gmail.com-20070412005219-6r0ulesm1wh1ivoh
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Thu 2007-04-12 15:46:50 +1000
        message:
          initial support for two new pdus for the domain socket to do fetch_lock
          
          no locking is yet done and the store_unlock call is still missing
          
          
          the ./tests/fetch.sh --daemon  test fails with parent process dying which needs to be investigated.
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.5
        merged: ronniesahlberg@gmail.com-20070412005219-6r0ulesm1wh1ivoh
        parent: ronniesahlberg@gmail.com-20070411230927-88foctkqh1hqr8ab
        parent: tridge@samba.org-20070412004418-85381cc96b73ebe8
        parent: tridge@samba.org-20070412004418-85381cc96b73ebe8
        parent: tridge@samba.org-20070412004418-85381cc96b73ebe8
        parent: tridge@samba.org-20070412004418-85381cc96b73ebe8
        parent: tridge@samba.org-20070412004418-85381cc96b73ebe8
        parent: tridge@samba.org-20070412005155-1411dc471326a713
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Thu 2007-04-12 10:52:19 +1000
        message:
          merge from volker
    ------------------------------------------------------------
    revno: 44.1.55
    merged: tridge@samba.org-20070412005155-1411dc471326a713
    parent: tridge@samba.org-20070412004418-85381cc96b73ebe8
    parent: vl@samba.org-20070411181215-rnhs93mcorxy9urf
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Thu 2007-04-12 10:51:55 +1000
    message:
      merge from vl
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.25
        merged: vl@samba.org-20070411181215-rnhs93mcorxy9urf
        parent: vl@samba.org-20070411145206-wwrw1bsq7fkshp2o
        committer: Volker Lendecke <vl@samba.org>
        branch nick: ctdb-vl
        timestamp: Wed 2007-04-11 20:12:15 +0200
        message:
          Rename "private" to "private_data"
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.24
        merged: vl@samba.org-20070411145206-wwrw1bsq7fkshp2o
        parent: vl@samba.org-20070411145125-2zvvrv3zw3nvn83s
        parent: tridge@samba.org-20070411122143-e0d0192ca901c6f9
        committer: Volker Lendecke <vl@samba.org>
        branch nick: ctdb-vl
        timestamp: Wed 2007-04-11 16:52:06 +0200
        message:
          Merge tridge's tree
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.23
        merged: vl@samba.org-20070411145125-2zvvrv3zw3nvn83s
        parent: vl@samba.org-20070411115758-oua7f39sry0tw1z9
        committer: Volker Lendecke <vl@samba.org>
        branch nick: ctdb-vl
        timestamp: Wed 2007-04-11 16:51:25 +0200
        message:
          Add a test to read back the message
          
          Volker
    ------------------------------------------------------------
    revno: 44.1.54
    merged: tridge@samba.org-20070412004418-85381cc96b73ebe8
    parent: tridge@samba.org-20070411122143-e0d0192ca901c6f9
    parent: ronniesahlberg@gmail.com-20070411230927-88foctkqh1hqr8ab
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Thu 2007-04-12 10:44:18 +1000
    message:
      merge from ronnie
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.4
        merged: ronniesahlberg@gmail.com-20070411230927-88foctkqh1hqr8ab
        parent: ronniesahlberg@gmail.com-20070411224415-ix25hyi4thd8ydoe
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Thu 2007-04-12 09:09:27 +1000
        message:
          add an example on how to read a message from the domain socket
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.3
        merged: ronniesahlberg@gmail.com-20070411224415-ix25hyi4thd8ydoe
        parent: ronniesahlberg@gmail.com-20070411222854-5k8oj8f10kqzasro
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Thu 2007-04-12 08:44:15 +1000
        message:
          do an infinite loop calling event_loop_once() in the ctdbd parent process instead of event_loop_wait()  since the latter will return and thus take down the daemon
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.2
        merged: ronniesahlberg@gmail.com-20070411222854-5k8oj8f10kqzasro
        parent: ronniesahlberg@gmail.com-20070411214928-pizt3e0yiw8ehql2
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Thu 2007-04-12 08:28:54 +1000
        message:
          add a test message to the messaging test so we can see that the message data is also passed from originator to receiver
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.2.1
        merged: ronniesahlberg@gmail.com-20070411214928-pizt3e0yiw8ehql2
        parent: ronniesahlberg@gmail.com-20070411103224-hvqzewjcfhpxcgbg
        parent: tridge@samba.org-20070411122143-e0d0192ca901c6f9
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Thu 2007-04-12 07:49:28 +1000
        message:
          merge from ridge and vl
    ------------------------------------------------------------
    revno: 44.1.53
    merged: tridge@samba.org-20070411122143-e0d0192ca901c6f9
    parent: tridge@samba.org-20070411121946-c5d80408a49dda5b
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Wed 2007-04-11 22:21:43 +1000
    message:
      use event_loop_wait instead of while(1)
    ------------------------------------------------------------
    revno: 44.1.52
    merged: tridge@samba.org-20070411121946-c5d80408a49dda5b
    parent: tridge@samba.org-20070411121724-5e763a4a0a3fc6ac
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Wed 2007-04-11 22:19:46 +1000
    message:
      use lib/replace for signal.h
    ------------------------------------------------------------
    revno: 44.1.51
    merged: tridge@samba.org-20070411121724-5e763a4a0a3fc6ac
    parent: tridge@samba.org-20070411121107-b9d7c18f685f344f
    parent: vl@samba.org-20070411115758-oua7f39sry0tw1z9
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Wed 2007-04-11 22:17:24 +1000
    message:
      merge from volker
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.22
        merged: vl@samba.org-20070411115758-oua7f39sry0tw1z9
        parent: ronniesahlberg@gmail.com-20070411103224-hvqzewjcfhpxcgbg
        parent: vl@samba.org-20070411111736-rllo7o2u3tnzq0pg
        committer: Volker Lendecke <vl@samba.org>
        branch nick: ctdb-vl
        timestamp: Wed 2007-04-11 13:57:58 +0200
        message:
          merge
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.1.2
        merged: vl@samba.org-20070411111736-rllo7o2u3tnzq0pg
        parent: vl@samba.org-20070411104910-78d551d2qsfxpytz
        committer: Volker Lendecke <vl@samba.org>
        branch nick: ctdb
        timestamp: Wed 2007-04-11 13:17:36 +0200
        message:
          Handle a client that exited correctly: We need to ignore SIGPIPE and when the
          read returns 0 bytes this means the client has exited. Close the connection
          then.
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21.1.1
        merged: vl@samba.org-20070411104910-78d551d2qsfxpytz
        parent: ronniesahlberg@gmail.com-20070411103224-hvqzewjcfhpxcgbg
        committer: Volker Lendecke <vl@samba.org>
        branch nick: ctdb
        timestamp: Wed 2007-04-11 12:49:10 +0200
        message:
          Fix uninitialized variable warnings
    ------------------------------------------------------------
    revno: 44.1.50
    merged: tridge@samba.org-20070411121107-b9d7c18f685f344f
    parent: tridge@samba.org-20070411052350-eb4fe86cc87ea5ed
    parent: ronniesahlberg@gmail.com-20070411103224-hvqzewjcfhpxcgbg
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Wed 2007-04-11 22:11:07 +1000
    message:
      merge from ronnie
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.21
        merged: ronniesahlberg@gmail.com-20070411103224-hvqzewjcfhpxcgbg
        parent: ronniesahlberg@gmail.com-20070411092719-nozq5vqjqueshjnp
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Wed 2007-04-11 20:32:24 +1000
        message:
          add an example on how to send a message to the daemon
          (send a message to ourself)
          
          this unfortunately terminates the ctdb daemon when running   but im too tired right now to debug it.
          checkin so that nothing gets lost overnight.
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.20
        merged: ronniesahlberg@gmail.com-20070411092719-nozq5vqjqueshjnp
        parent: ronniesahlberg@gmail.com-20070411090409-ah3bxg5j23a5t12u
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Wed 2007-04-11 19:27:19 +1000
        message:
          add call/reply parsing of the cluster connect-wait call to the test daemon.
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.19
        merged: ronniesahlberg@gmail.com-20070411090409-ah3bxg5j23a5t12u
        parent: ronniesahlberg@gmail.com-20070411085422-urfmy9oq2pnts1j8
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Wed 2007-04-11 19:04:09 +1000
        message:
          add a vnn field to the ctdb_reply_connect_wait pdu so that we can tell
          non-ctdb-linked clients what the vnn of the local cluster daemon is
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.18
        merged: ronniesahlberg@gmail.com-20070411085422-urfmy9oq2pnts1j8
        parent: ronniesahlberg@gmail.com-20070411054003-6lfat5jujxfmkmgs
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Wed 2007-04-11 18:54:22 +1000
        message:
          create a standalone ctdb daemon and a script ./direct/ctdbd.sh to start two such daemons in a 2 node cluster.
          
          create a small test application that connects to the ctdb daemon at /tmp/ctdb.socket.127.0.0.1 and do some commands to the daemon.
          currently this test tool only opens the socket and registers its pid with the daemon
          (the daemon needs to know the pid so that it can forward messages to the correct client)
          
          the test will be extended with additional ctdb commands
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.17
        merged: ronniesahlberg@gmail.com-20070411054003-6lfat5jujxfmkmgs
        parent: ronniesahlberg@gmail.com-20070411034315-806oyqbe9sf33dd9
        parent: tridge@samba.org-20070411052350-eb4fe86cc87ea5ed
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Wed 2007-04-11 15:40:03 +1000
        message:
          merge from tridge
    ------------------------------------------------------------
    revno: 44.1.49
    merged: tridge@samba.org-20070411052350-eb4fe86cc87ea5ed
    parent: tridge@samba.org-20070411050922-59469f0a8a24cf4b
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Wed 2007-04-11 15:23:50 +1000
    message:
      added --num-clients option to ctdb_messaging test
    ------------------------------------------------------------
    revno: 44.1.48
    merged: tridge@samba.org-20070411050922-59469f0a8a24cf4b
    parent: tridge@samba.org-20070411045447-b201f3449504949a
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Wed 2007-04-11 15:09:22 +1000
    message:
      use the new connect_wait code in the ctdb_messaging test
    ------------------------------------------------------------
    revno: 44.1.47
    merged: tridge@samba.org-20070411045447-b201f3449504949a
    parent: tridge@samba.org-20070411042614-eada54e55ac13cf8
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Wed 2007-04-11 14:54:47 +1000
    message:
      add proper support for ctdb_connect_wait in daemon mode
    ------------------------------------------------------------
    revno: 44.1.46
    merged: tridge@samba.org-20070411042614-eada54e55ac13cf8
    parent: tridge@samba.org-20070411040501-043570f3088576d6
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Wed 2007-04-11 14:26:14 +1000
    message:
      fixed sending messages to ourselves in non-daemon mode
    ------------------------------------------------------------
    revno: 44.1.45
    merged: tridge@samba.org-20070411040501-043570f3088576d6
    parent: tridge@samba.org-20070411015828-e253a2891120b563
    parent: ronniesahlberg@gmail.com-20070411034315-806oyqbe9sf33dd9
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Wed 2007-04-11 14:05:01 +1000
    message:
      merge from ronnie, plus complete the client side of inter-node messaging
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.16
        merged: ronniesahlberg@gmail.com-20070411034315-806oyqbe9sf33dd9
        parent: ronniesahlberg@gmail.com-20070411010820-8dldbhtoz9oeps1a
        parent: tridge@samba.org-20070411015828-e253a2891120b563
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Wed 2007-04-11 13:43:15 +1000
        message:
          add a test that sends messages between clients connected to the same ctdb
          
          add code to actually pass the messages between clients and ctdb
    ------------------------------------------------------------
    revno: 44.1.44
    merged: tridge@samba.org-20070411015828-e253a2891120b563
    parent: tridge@samba.org-20070411011144-6595072619c53c52
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Wed 2007-04-11 11:58:28 +1000
    message:
      partially completed work towards full messaging system which will work in both daemon and standalone mode. Does not compile\! committing so ronnie can continue while I'm out
    ------------------------------------------------------------
    revno: 44.1.43
    merged: tridge@samba.org-20070411011144-6595072619c53c52
    parent: tridge@samba.org-20070411010226-3f2b9b5bcdffa4d2
    parent: ronniesahlberg@gmail.com-20070411010820-8dldbhtoz9oeps1a
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Wed 2007-04-11 11:11:44 +1000
    message:
      merge from ronnie
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.15
        merged: ronniesahlberg@gmail.com-20070411010820-8dldbhtoz9oeps1a
        parent: ronniesahlberg@gmail.com-20070410111455-rbavt7l9afkyze4p
        parent: tridge@samba.org-20070411010226-3f2b9b5bcdffa4d2
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Wed 2007-04-11 11:08:20 +1000
        message:
          merge from tridge
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.14
        merged: ronniesahlberg@gmail.com-20070410111455-rbavt7l9afkyze4p
        parent: ronniesahlberg@gmail.com-20070410110529-ocrxhoa0xp5b3s3v
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Tue 2007-04-10 21:14:55 +1000
        message:
          rename client.id to client.messenger_id to make the purpose of the field more obvious
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.13
        merged: ronniesahlberg@gmail.com-20070410110529-ocrxhoa0xp5b3s3v
        parent: ronniesahlberg@gmail.com-20070410102511-sxaua0csi2ia1234
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Tue 2007-04-10 21:05:29 +1000
        message:
          add a call to register the pid for a messengin service
          
          store this pid inside the client structure in the ctdb daemon
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.12
        merged: ronniesahlberg@gmail.com-20070410102511-sxaua0csi2ia1234
        parent: ronniesahlberg@gmail.com-20070410045323-893gitfaif8bmigt
        parent: tridge@samba.org-20070410094029-2b9561032c749c8a
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Tue 2007-04-10 20:25:11 +1000
        message:
          updates from tridges tree
    ------------------------------------------------------------
    revno: 44.1.42
    merged: tridge@samba.org-20070411010226-3f2b9b5bcdffa4d2
    parent: tridge@samba.org-20070411010142-79dd71bdf0bed79f
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Wed 2007-04-11 11:02:26 +1000
    message:
      forgot to add ctdb_client.c
    ------------------------------------------------------------
    revno: 44.1.41
    merged: tridge@samba.org-20070411010142-79dd71bdf0bed79f
    parent: tridge@samba.org-20070410104831-d956235aa1d7329f
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Wed 2007-04-11 11:01:42 +1000
    message:
       - add --daemon flag to ctdb_fetch test code
       - split client specific routines out of ctdb_daemon.c
       - use ctdb_queue code in message send from client to daemon
       - use clearer names in client/daemon functions
       - use talloc autofree context to avoid global for unlink of socket on
         exit
       - start on API change for message handler, to allow ctdb messaging to
         handle daemon mode with multiple clients
    ------------------------------------------------------------
    revno: 44.1.40
    merged: tridge@samba.org-20070410104831-d956235aa1d7329f
    parent: tridge@samba.org-20070410094029-2b9561032c749c8a
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Tue 2007-04-10 20:48:31 +1000
    message:
      fix the queueing for partially connected tcp sockets
    ------------------------------------------------------------
    revno: 44.1.39
    merged: tridge@samba.org-20070410094029-2b9561032c749c8a
    parent: tridge@samba.org-20070410093521-faf87738c5a369a7
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Tue 2007-04-10 19:40:29 +1000
    message:
      make some functions static, and remove an unused structure
    ------------------------------------------------------------
    revno: 44.1.38
    merged: tridge@samba.org-20070410093521-faf87738c5a369a7
    parent: tridge@samba.org-20070410093321-3dfc6368f2d792c8
    parent: ronniesahlberg@gmail.com-20070410045323-893gitfaif8bmigt
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Tue 2007-04-10 19:35:21 +1000
    message:
      merge from ronnie
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.11
        merged: ronniesahlberg@gmail.com-20070410045323-893gitfaif8bmigt
        parent: ronniesahlberg@gmail.com-20070410031715-9ec894cesu1zghs4
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Tue 2007-04-10 14:53:23 +1000
        message:
          remove old ifdef that remained from when this was a header file
    ------------------------------------------------------------
    revno: 44.1.37
    merged: tridge@samba.org-20070410093321-3dfc6368f2d792c8
    parent: tridge@samba.org-20070410044813-b5c4d10a223f32dd
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Tue 2007-04-10 19:33:21 +1000
    message:
      made all sockets handle partial IO
      abstract IO via ctdb_queue_*() functions
    ------------------------------------------------------------
    revno: 44.1.36
    merged: tridge@samba.org-20070410044813-b5c4d10a223f32dd
    parent: tridge@samba.org-20070410044632-78db5388490c3d40
    parent: ronniesahlberg@gmail.com-20070410031715-9ec894cesu1zghs4
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Tue 2007-04-10 14:48:13 +1000
    message:
      merge tcp changes from ronnie
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.10
        merged: ronniesahlberg@gmail.com-20070410031715-9ec894cesu1zghs4
        parent: ronniesahlberg@gmail.com-20070410023925-skzpy7ls4t4z5lzp
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Tue 2007-04-10 13:17:15 +1000
        message:
          change the tcp code to call ctdb_read_pdu() instead of doing the partial read thing explicitely
    ------------------------------------------------------------
    revno: 44.1.35
    merged: tridge@samba.org-20070410044632-78db5388490c3d40
    parent: tridge@samba.org-20070410030647-42fc31cb19982f18
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Tue 2007-04-10 14:46:32 +1000
    message:
      added daemon mode to ctdb_bench
    ------------------------------------------------------------
    revno: 44.1.34
    merged: tridge@samba.org-20070410030647-42fc31cb19982f18
    parent: tridge@samba.org-20070410030523-6999e1796946bdfe
    parent: ronniesahlberg@gmail.com-20070410023925-skzpy7ls4t4z5lzp
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Tue 2007-04-10 13:06:47 +1000
    message:
      merge from ronnie
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.9
        merged: ronniesahlberg@gmail.com-20070410023925-skzpy7ls4t4z5lzp
        parent: ronniesahlberg@gmail.com-20070410022310-vg2sqat3nfcrxvh1
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Tue 2007-04-10 12:39:25 +1000
        message:
          move the checking of the CONNECT_WAIT flag into the start method for tcp
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.8
        merged: ronniesahlberg@gmail.com-20070410022310-vg2sqat3nfcrxvh1
        parent: ronniesahlberg@gmail.com-20070410021858-cnk4wlf2s612ue5i
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Tue 2007-04-10 12:23:10 +1000
        message:
          restore the test script that was updated by mistake in the previous checkin
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.7
        merged: ronniesahlberg@gmail.com-20070410021858-cnk4wlf2s612ue5i
        parent: ronniesahlberg@gmail.com-20070409224739-vqgs0b5pvexdf0xu
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Tue 2007-04-10 12:18:58 +1000
        message:
          add a CONNECT_WAIT flag to replace the call ctdb_connect_wait() since 
          we can no longer use this function from the application if we are in daemon mode.
          
          
          add a horrible "sleep()" to ctdb_test.c   to prevent the daemon from dissapearing (parent process died) when the application exits which may happen before the other nodes in the test have finished talking to our daemon
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.6
        merged: ronniesahlberg@gmail.com-20070409224739-vqgs0b5pvexdf0xu
        parent: ronniesahlberg@gmail.com-20070409223829-80dgr2d4m33gant8
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Tue 2007-04-10 08:47:39 +1000
        message:
          add a atexit() call to remove the domain socket when the daemon exits
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.5
        merged: ronniesahlberg@gmail.com-20070409223829-80dgr2d4m33gant8
        parent: ronniesahlberg@gmail.com-20070409200339-jng2tmd7iz7pbl5k
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Tue 2007-04-10 08:38:29 +1000
        message:
          change ctdb_client_read() to use the ctdb_read_pdu() helper
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.4
        merged: ronniesahlberg@gmail.com-20070409200339-jng2tmd7iz7pbl5k
        parent: ronniesahlberg@gmail.com-20070409015127-ptae8qdwajxjk4nq
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Tue 2007-04-10 06:03:39 +1000
        message:
          make normal/deamon mode controllable by a ctdb flag so that the api looks the same in both modes to a client.
          
          send the correct structure back to a client
          
          assorted other cleanups
          
          (tests/test1.sh now works in daemon mode)
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.3
        merged: ronniesahlberg@gmail.com-20070409015127-ptae8qdwajxjk4nq
        parent: ronniesahlberg@gmail.com-20070408021148-2sa1cwikee5mfaki
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Mon 2007-04-09 11:51:27 +1000
        message:
          dispatcher daemon   first try.
          
          does not yet work
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.2
        merged: ronniesahlberg@gmail.com-20070408021148-2sa1cwikee5mfaki
        parent: ronniesahlberg@gmail.com-20070405230841-qvbelakbhbpl1za4
        parent: tridge@samba.org-20070407005814-c83829906f25bead
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Sun 2007-04-08 12:11:48 +1000
        message:
          merge from tridge
    ------------------------------------------------------------
    revno: 44.1.33
    merged: tridge@samba.org-20070410030523-6999e1796946bdfe
    parent: tridge@samba.org-20070410025154-12ddbf5dc4ff7bf6
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Tue 2007-04-10 13:05:23 +1000
    message:
      fix a possible free after use
    ------------------------------------------------------------
    revno: 44.1.32
    merged: tridge@samba.org-20070410025154-12ddbf5dc4ff7bf6
    parent: tridge@samba.org-20070407005814-c83829906f25bead
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Tue 2007-04-10 12:51:54 +1000
    message:
      fix configure for new test location
    ------------------------------------------------------------
    revno: 44.1.31
    merged: tridge@samba.org-20070407005814-c83829906f25bead
    parent: tridge@samba.org-20070407004647-519ee025508125c0
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Sat 2007-04-07 10:58:14 +1000
    message:
      another memory leak
    ------------------------------------------------------------
    revno: 44.1.30
    merged: tridge@samba.org-20070407004647-519ee025508125c0
    parent: tridge@samba.org-20070407004500-6449e11ba1e7ed71
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Sat 2007-04-07 10:46:47 +1000
    message:
      remove talloc debug code
    ------------------------------------------------------------
    revno: 44.1.29
    merged: tridge@samba.org-20070407004500-6449e11ba1e7ed71
    parent: tridge@samba.org-20070407000109-7dc6d89d41a3c8e9
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Sat 2007-04-07 10:45:00 +1000
    message:
      fixed a bunch of memory leaks
    ------------------------------------------------------------
    revno: 44.1.28
    merged: tridge@samba.org-20070407000109-7dc6d89d41a3c8e9
    parent: tridge@samba.org-20070406044105-4dcf971d05626846
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Sat 2007-04-07 10:01:09 +1000
    message:
      put test code in tests/ directory
    ------------------------------------------------------------
    revno: 44.1.27
    merged: tridge@samba.org-20070406044105-4dcf971d05626846
    parent: tridge@samba.org-20070405234645-d4e331dc0077c3ed
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Fri 2007-04-06 14:41:05 +1000
    message:
      added a magic header for wireshark and packet version info
    ------------------------------------------------------------
    revno: 44.1.26
    merged: tridge@samba.org-20070405234645-d4e331dc0077c3ed
    parent: tridge@samba.org-20070405031906-a9920c6dd34b2138
    parent: ronniesahlberg@gmail.com-20070405230841-qvbelakbhbpl1za4
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Fri 2007-04-06 09:46:45 +1000
    message:
      merge from ronnie
        ------------------------------------------------------------
        revno: 44.1.22.1.3.1.1
        merged: ronniesahlberg@gmail.com-20070405230841-qvbelakbhbpl1za4
        parent: ronniesahlberg@gmail.com-20070404111556-vc1hky229by8leu1
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Fri 2007-04-06 09:08:41 +1000
        message:
          When we create a tcp connection to a remote ctdb node  do an explicit bind() to set our source side to the same ip address as we use to listen to ctdb traffic.
          
          We need this since there is no guarantee that INADDR_ANY (which would be defaulted to if we dont bind) would be routable from the remote host.
          This is entirely possible to happen since CTDB traffic is likely to be isolated to a private non-routable network.
    ------------------------------------------------------------
    revno: 44.1.25
    merged: tridge@samba.org-20070405031906-a9920c6dd34b2138
    parent: tridge@samba.org-20070404050249-9ca53bdf68db13d5
    parent: tridge@samba.org-20070405031831-2f35efdda08ec847
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Thu 2007-04-05 13:19:06 +1000
    message:
      merge from ronnies branch
        ------------------------------------------------------------
        revno: 44.1.22.1.4
        merged: tridge@samba.org-20070405031831-2f35efdda08ec847
        parent: ronniesahlberg@gmail.com-20070404111556-vc1hky229by8leu1
        parent: ronniesahlberg@gmail.com-20070404111556-vc1hky229by8leu1
        committer: Andrew Tridgell <tridge@samba.org>
        branch nick: ronnie
        timestamp: Thu 2007-04-05 13:18:31 +1000
        message:
          merge fetch code from ronnie, and add a simple fetch test
        ------------------------------------------------------------
        revno: 44.1.22.1.3
        merged: ronniesahlberg@gmail.com-20070404111556-vc1hky229by8leu1
        parent: ronniesahlberg@gmail.com-20070404050535-5ut2sw0jrtixt4gf
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Wed 2007-04-04 21:15:56 +1000
        message:
          first test of forced migration of records.  compiles but not tested.
        ------------------------------------------------------------
        revno: 44.1.22.1.2
        merged: ronniesahlberg@gmail.com-20070404050535-5ut2sw0jrtixt4gf
        parent: ronniesahlberg@gmail.com-20070403094100-fh6h6ry98gxqof24
        parent: tridge@samba.org-20070404050249-9ca53bdf68db13d5
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Wed 2007-04-04 15:05:35 +1000
        message:
          tridge
    ------------------------------------------------------------
    revno: 44.1.24
    merged: tridge@samba.org-20070404050249-9ca53bdf68db13d5
    parent: tridge@samba.org-20070403101350-2b6ff2679f75aa06
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Wed 2007-04-04 15:02:49 +1000
    message:
      merge back some changes from Samba4
    ------------------------------------------------------------
    revno: 44.1.23
    merged: tridge@samba.org-20070403101350-2b6ff2679f75aa06
    parent: tridge@samba.org-20070308002715-7gx6puojgyup2dv2
    parent: ronniesahlberg@gmail.com-20070403094100-fh6h6ry98gxqof24
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Tue 2007-04-03 20:13:50 +1000
    message:
      merge multi-database support from ronnie
        ------------------------------------------------------------
        revno: 44.1.22.1.1
        merged: ronniesahlberg@gmail.com-20070403094100-fh6h6ry98gxqof24
        parent: tridge@samba.org-20070308002715-7gx6puojgyup2dv2
        committer: Ronnie sahlberg <ronniesahlberg@gmail.com>
        branch nick: ctdb
        timestamp: Tue 2007-04-03 19:41:00 +1000
        message:
          Split CTDB into sub contexts to handle multiple concurrent databases within the same context.
    ------------------------------------------------------------
    revno: 44.1.22
    merged: tridge@samba.org-20070308002715-7gx6puojgyup2dv2
    parent: tridge@samba.org-20070220035713-jeodfq36sfuzodbs
    parent: psomogyi@gamax.hu-20070226105920-dlootykwymain6s1
    committer: Andrew Tridgell <tridge@samba.org>
    branch nick: tridge
    timestamp: Thu 2007-03-08 11:27:15 +1100
    message:
      merged changes from peter

Diff too large for email (7810, the limit is 1000).

