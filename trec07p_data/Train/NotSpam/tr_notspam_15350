From beginners-return-92071-ktwarwic=speedy.uwaterloo.ca@perl.org  Fri Jun  1 11:22:06 2007
Return-Path: <beginners-return-92071-ktwarwic=speedy.uwaterloo.ca@perl.org>
Received: from lists.develooper.com (x6.develooper.com [63.251.223.186])
	by flax9.uwaterloo.ca (8.12.8/8.12.5) with SMTP id l51FM5hB011471
	for <ktwarwic@flax9.uwaterloo.ca>; Fri, 1 Jun 2007 11:22:05 -0400
Received: (qmail 26562 invoked by uid 514); 1 Jun 2007 15:21:54 -0000
Mailing-List: contact beginners-help@perl.org; run by ezmlm
Precedence: bulk
List-Post: <mailto:beginners@perl.org>
List-Help: <mailto:beginners-help@perl.org>
List-Unsubscribe: <mailto:beginners-unsubscribe@perl.org>
List-Subscribe: <mailto:beginners-subscribe@perl.org>
List-Id: <beginners.perl.org>
Delivered-To: mailing list beginners@perl.org
Received: (qmail 26553 invoked from network); 1 Jun 2007 15:21:53 -0000
Received: from x1a.develooper.com (HELO x1.develooper.com) (216.52.237.111)
  by lists.develooper.com with SMTP; 1 Jun 2007 15:21:53 -0000
Received: (qmail 1171 invoked by uid 225); 1 Jun 2007 15:21:53 -0000
Delivered-To: beginners@perl.org
Received: (qmail 1161 invoked by alias); 1 Jun 2007 15:21:52 -0000
X-Spam-Status: No, hits=-1.9 required=8.0
	tests=BAYES_00,DKIM_POLICY_SIGNSOME,DK_POLICY_SIGNSOME,SPF_NEUTRAL
X-Spam-Check-By: la.mx.develooper.com
Received-SPF: neutral (x1.develooper.com: 63.251.223.186 is neither permitted nor denied by domain of mritty@gmail.com)
Received: from x6.develooper.com (HELO lists.develooper.com) (63.251.223.186)
    by la.mx.develooper.com (qpsmtpd/0.28) with SMTP; Fri, 01 Jun 2007 08:21:35 -0700
Received: (qmail 26520 invoked by uid 515); 1 Jun 2007 15:21:31 -0000
To: beginners@perl.org, perl-beginners@moderators.isc.org
MBOX-Line: From news@google.com Fri Jun 01 15:21:30 2007
Delivered-To: colobus-nntpmod@lists.develooper.com
Received: (qmail 26512 invoked from network); 1 Jun 2007 15:21:29 -0000
Received: from x1a.develooper.com (HELO x1.develooper.com) (216.52.237.111)
  by lists.develooper.com with SMTP; 1 Jun 2007 15:21:29 -0000
Received: (qmail 995 invoked by uid 225); 1 Jun 2007 15:21:29 -0000
Delivered-To: news-moderator-perl.beginners@perl.org
Received: (qmail 972 invoked by alias); 1 Jun 2007 15:21:28 -0000
Received-SPF: neutral (x1.develooper.com: 216.168.1.22 is neither permitted nor denied by domain of news@google.com)
Received: from trinity.supernews.net (HELO trinity.supernews.net) (216.168.1.22)
    by la.mx.develooper.com (qpsmtpd/0.28) with ESMTP; Fri, 01 Jun 2007 08:19:08 -0700
Received: from proxy.google.com ([66.102.14.241]:22184)
	by trinity.supernews.net with esmtps (TLSv1:AES256-SHA:256)
	(Exim 4.66 (FreeBSD))
	(envelope-from <news@google.com>)
	id 1Hu8u8-0008C6-9g
	for perl-beginners@moderators.isc.org; Fri, 01 Jun 2007 15:19:04 +0000
Received: from AR019023
	by proxy.google.com with ESMTP id l51FIst7005830
	for <perl-beginners@moderators.isc.org>; Fri, 1 Jun 2007 08:18:54 -0700
Received: (from news@localhost)
	by Google Production id l51FIsJJ030468
	for perl-beginners@moderators.isc.org; Fri, 1 Jun 2007 08:18:54 -0700
From: Paul Lalli <mritty@gmail.com>
Subject: Re: Algorithm or module needed
Date: Fri, 01 Jun 2007 08:18:54 -0700
Organization: http://groups.google.com
Lines: 75
Message-ID: <1180711134.111142.233730@q66g2000hsg.googlegroups.com>
References: <46603B3F.23143.2A6306BB@dermot.sciencephoto.com>
NNTP-Posting-Host: 204.97.183.31
Mime-Version: 1.0
Content-Type: text/plain; charset="iso-8859-1"
X-Trace: posting.google.com 1180711134 30467 127.0.0.1 (1 Jun 2007 15:18:54 GMT)
X-Complaints-To: groups-abuse@google.com
NNTP-Posting-Date: Fri, 1 Jun 2007 15:18:54 +0000 (UTC)
In-Reply-To: <46603B3F.23143.2A6306BB@dermot.sciencephoto.com>
User-Agent: G2/1.0
X-HTTP-UserAgent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; InfoPath.1),gzip(gfe),gzip(gfe)
X-HTTP-Via: 1.0 mndnetcachea (NetCache NetApp/6.0.5)
Complaints-To: groups-abuse@google.com
Injection-Info: q66g2000hsg.googlegroups.com; posting-host=204.97.183.31;
   posting-account=p3DCbw0AAAAc32agNMy1mXKInuw5KHP_
X-Posted-By: 63.251.223.186
X-Old-Spam-Check-By: la.mx.develooper.com
X-Old-Spam-Status: No, hits=0.1 required=8.0
	tests=BAYES_00,DKIM_POLICY_SIGNSOME,DK_POLICY_SIGNSOME,KARMA_CONNECT_NEGATIVE,SPF_NEUTRAL

On Jun 1, 10:29 am, der...@sciencephoto.com (Beginner) wrote:
> Hi,
>
> I am trying to copy some file from a removable HDD to a network
> drive. I want replicate the directory structure and omit un-needed
> files.
>
> The directory paths a 4-5 levels deep and I am trying to work out an
> efficient way to recreate the directory path.
>
> What I've been doing is using File::Find to collect the file and then
> in the coderef calling the following subroutine to check the path but
> i didn't go too far as my method seems....well not well formed.
>
> The path to a source file looks like:
>
> e:/Dir1/Day 1/AM/01/myfile.jpg
>
> use strict;
> use warnings;
> ...
> ...snip
>
> sub check_dir {
>
> # @_ = File::Find::dir
>
>  my $path = shift;
>  return unless (-e $path);
>
> # Split the path on it's parts.
>  my @parts = split('/',$path);
>
> # Loop from 1 to skip the first part of the path.
>  for (my $i = 1; $i <= $#parts; ++$i)  {
>
>         my $l = $dist.'/'.$parts[$i];
>         if (! -e $l) {
>                 print "Checking $l\n";
>                 my $j = $i + 1;                 # urg!
>                 my $lev = $dist.'/'.$parts[$i].'/'.$parts[$j];
>                 if (! -e $lev) {
>                         print "Checking $lev\n";
>                 }
>         }
>  }
>
> Can anyone offer me some advice with this?

Either File::Copy::Recursive, or File::Path combined with File::Find,
File::Copy and File::Basename

File::Copy::Recursive is available on the CPAN at
http://search.cpan.org/~dmuey/File-Copy-Recursive-0.33/Recursive.pm

File::Path, File::Find, and File::Basename are all core modules.
File::Copy::Recursive will definitely be the least work for you.
Otherwise, your algorith should be something like (pseudo-code):
find( \&copy_file, '/');
sub copy_file {
   if (-d) {
      mkpath("newsystem/$_");
   } elsif (-f) {
      my $path = basedir($File::Find::name);
      mkpath("newsystem/$path");
      copy $path, "newsystem/$path";
   } else {
      carp "Don't know how to handle $File::Find::name!\n";
   }
}

Paul Lalli




-- 
To unsubscribe, e-mail: beginners-unsubscribe@perl.org
For additional commands, e-mail: beginners-help@perl.org
http://learn.perl.org/


